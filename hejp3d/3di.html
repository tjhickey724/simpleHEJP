<!-- ********** TO DO LIST **************** -->
<!-- FOR SOME REASON, THE COORDINATE PLANE IS UPSIDE DOWN -->
<!-- QUERIES -->
<!-- BUTTON FOR FURTHER ANALYSIS -->
<!-- GROWTH VS ABSOLUTE -->
<!-- REPOSITION TOOLTIP AND LEGEND -->
<!-- NO AUTO SCALING FOR DATA OTHER THAN STAFF TYPE YET -->


<!-- ************** SUGGESTIONS ***************** -->


<!-- ******************* BUGS ******************* -->
<!-- ERROR OCCURS WHEN CHOOSING THE NONFACULTY DATA TYPE -->


<!DOCTYPE html>
<meta charset="utf-8">

<!-- IMPORTED SCRIPTS -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/d3-3d/build/d3-3d.min.js"></script>
<script src="https://gka.github.io/d3-jetpack/d3v4+jetpack.js"></script>

<body>

    <div class="container">

        <h2>HEJP Interactive Visualization Tool</h2>

        <small>
            <label for="x-axis">Choose two variables:</label>
                <input type="checkbox" name="variable" onclick = "return limitCheck()" value="years">Years
                <input type="checkbox" name="variable" onclick = "return limitCheck()" value="institution">Institution
                <input type="checkbox" name="variable" onclick = "return limitCheck()" value="staff">Staff
                <input type="checkbox" name="variable" onclick = "return limitCheck()" value="fields">Fields

            <!-- RADIO BUTTON CHOICES CHANGE DEPENDING ON ABOVE OPTIONS -->

            <!-- ******************* INSTITUTION TYPE ******************* -->
            <div id="instbuttons" style="display: none">
                R1 <input
                    type="radio"
                    value="r1"
                    name="inst"
                    onChange="inst='r1'; init()"
                    class="instType"
                    > &nbsp;|&nbsp;
                4 year <input
                    type="radio"
                    value="fourYear"
                    name="inst"
                    onChange="inst='fourYear'; init()"
                    class="instType"
                    >&nbsp;|&nbsp;
                2 year <input
                    type="radio"
                    value="twoYear"
                    name="inst"
                    onChange="inst='twoYear'; init()"
                    class="instType"
                    >&nbsp;|&nbsp;
                all <input
                    type="radio"
                    value="all"
                    name="inst"
                    onChange="inst='all'; init()"
                    class="instType"
                    checked
                    >&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;
            </div>
            <!-- ******************* STAFF TYPE ******************* -->
            <div id="staffbuttons" style="display: none">
                faculty <input
                    type="radio"
                    value="faculty"
                    name="staff"
                    onChange="role='faculty'; init()"
                    class="staffType"
                    checked
                    > &nbsp;|&nbsp;
                nonfaculty <input
                    type="radio"
                    value="nonfaculty"
                    name="staff"
                    onChange="role='nonfaculty'; init()"
                    class="staffType"
                    >&nbsp;|&nbsp;
                postdoc <input
                    type="radio"
                    value="postdoc"
                    name="staff"
                    onChange="role='postdoc'; init()"
                    class="staffType"
                    >&nbsp;|&nbsp;
            </div>
            <!-- ******************* FIELD OF STUDY ******************* -->
            <div id="fieldbuttons" style="display: none">
                Life Sciences <input
                    type="radio"
                    value="FS_Life_sciences"
                    name="FS"
                    onChange="fs='FS_Life_sciences'; init()"
                    class="fs_type"
                    > &nbsp; | &nbsp;
                Math/CS <input
                    type="radio"
                    value="FS_Mathematics_and_computer_sciences"
                    name="FS"
                    onChange="fs='FS_Mathematics_and_computer_sciences'; init()"
                    class="fs_type"
                    > &nbsp; | &nbsp;
                Psych/SocSci <input
                    type="radio"
                    value="FS_Psychology_and_social_sciences"
                    name="FS"
                    onChange="fs='FS_Psychology_and_social_sciences'; init()"
                    class="fs_type"
                    > &nbsp; | &nbsp;
                Engineering <input
                    type="radio"
                    value="FS_Engineering"
                    name="FS"
                    onChange="fs='FS_Engineering'; init()"
                    class="fs_type"
                    > &nbsp; | &nbsp;
                Education <input
                    type="radio"
                    value="FS_Education"
                    name="FS"
                    onChange="fs='FS_Education'; init()"
                    class="fs_type"
                    > &nbsp; | &nbsp;
                Humanities/Arts <input
                    type="radio"
                    value="FS_Humanities_and_arts"
                    name="FS"
                    onChange="fs='FS_Humanities_and_arts'; init()"
                    class="fs_type"
                    > &nbsp; | &nbsp;
                Others <input
                    type="radio"
                    value="FS_Others"
                    name="FS"
                    onChange="fs='FS_Others'; init()"
                    class="fs_type"
                    > &nbsp; | &nbsp;
                All <input
                    type="radio"
                    value="Total"
                    name="FS"
                    onChange="fs='Total'; init()"
                    class="fs_type"
                    checked
                    > &nbsp; | &nbsp;
            </div>
            <!-- ******************* YEAR ******************* -->
            <div id="yearbuttons" style="display: none">
                2007 <input
                    type="radio"
                    value="2007"
                    name="Year"
                    onChange="year=0; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2010 <input
                    type="radio"
                    value="2010"
                    name="Year"
                    onChange="year=1; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2011 <input
                    type="radio"
                    value="2011"
                    name="Year"
                    onChange="year=2; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2012 <input
                    type="radio"
                    value="2012"
                    name="Year"
                    onChange="year=3; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2013 <input
                    type="radio"
                    value="2013"
                    name="Year"
                    onChange="year=4; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2014 <input
                    type="radio"
                    value="2014"
                    name="Year"
                    onChange="year=5; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2015 <input
                    type="radio"
                    value="2015"
                    name="Year"
                    onChange="year=6; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2016 <input
                    type="radio"
                    value="2016"
                    name="Year"
                    onChange="year=7; init()"
                    class="year_type"
                    > &nbsp; | &nbsp;
                2017 <input
                    type="radio"
                    value="2017"
                    name="Year"
                    onChange="year=8; init()"
                    class="year_type"
                    checked
                    > &nbsp; | &nbsp;
            </div>
            <!-- ******************* DATA DISPLAY ******************* -->
            <div id="valuebuttons" style="display: none">
                Absolute <input
                    type="radio"
                    value="absolute"
                    name="style"
                    onChange="datatype=0; init()"
                    class="dataType"
                    checked
                    > &nbsp;|&nbsp;
                Growth <input
                    type="radio"
                    value="growth"
                    name="style"
                    onChange="datatype=1; init()"
                    class="dataType"
                    >&nbsp;|&nbsp;
            </div>
            <!-- **************** SCALING **************************** -->
            <div id="scalediv" style="display: none">
                Scale <input type="number" id="scale" name="scale" onchange="adjust()" min="1">
                <input type="checkbox" value="freeze" name="freeze" onchange="freeze()"> Freeze Scale
            </div>
            <!-- ******************* WARNING ******************* -->
            <div id="warning" style="display: none; color: crimson">
                <br>
                <b>You must choose two variables!</b>
            </div>

        </small>
        <hr>

        <div id="viz">
        </div>

    </div><!-- container -->






    <!-- ************************ THIS IS THE DATA VISULIZATION ************************ -->
    <div id="image" style="display: block">
        <svg width="900" height="500" style="outline-color: black; outline-style: solid; position: absolute; left: 300px"></svg>

    </div>


    <!-- DATA TABLE DISPLAYED WHEN A CUBE IS CLICKED
    Idea: Make an Accessible SVG table easily manipulated by d3.js-->
    <div>
    <svg id = "tooltipTT" width="290" height="500" viewBox="-100 0 300 150" style ="position: absolute;">
        <style type="text/css">
            body { font-family: 'Helvetica Neue', Helvetica; font-weight: 300; padding: 20px;}
            th { text-align: left; }
            th, td { padding: 0 1em 0.5ex 0;}
            th.center, td.center { text-align: center; }
            th.num, td.num { text-align: right; }
        

        </style>
        
        </svg> <!-- End of table svg -->
       <!-- End of table div -->
        
        <!-- Button for making furtger queries to the database
        CURRENTLY DOES NOTHIN ON CLICK.-->
        <button id = "further_analysis" class = "button" onClick = display_raw_information() style="display: none">First 10 Jobs</button>
    </div>
    

    <!-- TOOLTIP
    Notes: The width is set to make sure tooltip svg ends when vizualization begins-->


    <!--   THIS IS THE UPDATE BUTTON IN THE CORNER 
            Includes the button for further analysis that shows up
            with the tooltip. Diplays the "First 10 Jobs" for the selection. -->
    <style type="text/css">

        .button {
            position: absolute;
            right: 10px;
            top: 10px;
        }
    
         #further_analysis {
            position: absolute;
            right: 10px;
            top: 35px;
            }

        div.tooltip{
            pointer-events: none;
        }

    </style>

    <button class = "button" onClick = "setUp();">update</button>
    <!-- END OF THE UPDATE BUTTON IN THE CORNER -->

    <div id = "rawdata" 
         style ="
            height: 33vh;
            position: fixed; 
            bottom:0%;
            max-width: 268px;
            width:200; 
            background-color: #ffccaa; 
            overflow:scroll
                 ">
        This is where the raw data goes ...
    </div>
   
    <!-- start of the javascript to create the cubes themselves and work with data -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="3di.js"></script>


</body>
